(()=>{var n={471:()=>{$.component("Fields",{getTpl:function(){return'<div class="field-tools">\n                    <div class="items-layout">\n                        <span class="group-head">布局</span>\n                        <div class="studio-component studio-field-tabs">页签</div>\n                        <div class="studio-component studio-field-group">分组</div>\n                    </div>\n                    <div class="items-field">\n                        <span class="group-head">新字段</span>\n                        <div class="studio-component studio-field-char" title="char">文本</div>\n                        <div class="studio-component studio-field-text" title="text">多行文字</div>\n                        <div class="studio-component studio-field-integer" title="integer">整数</div>\n                        <div class="studio-component studio-field-float" title="float">小数</div>\n                        <div class="studio-component studio-field-date" title="date">日期</div>\n                        <div class="studio-component studio-field-datetime" title="datetime">日期时间</div>\n                        <div class="studio-component studio-field-boolean" title="boolean">勾选框</div>\n                        <div class="studio-component studio-field-selection" title="selection">下拉框</div>\n                        <div class="studio-component studio-field-binary" title="binary">文件</div>\n                        <div class="studio-component studio-field-image" title="image">图片</div>\n                        <div class="studio-component studio-field-many2one" title="many2one">多对一</div>\n                        <div class="studio-component studio-field-one2many" title="one2many">一对多</div>\n                        <div class="studio-component studio-field-many2many" title="many2many">多对多</div>\n                        <div class="studio-component studio-field-tags" title="many2many">标签</div>\n                        <div class="studio-component studio-field-priority" title="selection">优先级</div>\n                        <div class="studio-component studio-field-related" title="related">关联字段</div>\n                    </div>\n                    <div class="field-list">\n                        <span>现有字段</span>\n                    </div>\n                </div>'},init:function(){let n=this;n.dom.append(n.getTpl()).find(".studio-component").draggable({containment:n.designer.dom,helper:function(n){return $(n.currentTarget).clone(!0).addClass("studio-component-dragging")}})}})},795:()=>{$.component("FormView",{getTpl:function(){return'<div class="form-panel">\n                    <div class="content-header">\n                    </div>\n                    <div class="content">\n                        <div role="form" class="form-content">\n                            <div class="container-fluid form-body">\n                                <div class="h-100 card-body row">\n                                    <div class="col-md-12 form-droppable">\n                                        <div class="grid form-view" style="grid-template-columns: repeat(4, 1fr);">\n                                            <div class="form-field hide">\n                                                <div class="w-100 hook-left" style="height:90px">\n                                                </div>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>'},getHookTpl:function(){return'<div class="form-group col-12 form-hook"><div></div></div>'},getField:function(n){return`<div class="form-group col-12 form-field">\n                    <div class="tools position-absolute toasts-top-right" style="display:none">\n                        <span role="button" class="fa fa-times mr-1"></span>\n                        <span role="button" class="fa fa-pencil-alt mr-1"></span>\n                        <span role="button" class="fa fa-arrows-alt mr-1"></span>\n                    </div>\n                    <div class="position-absolute d-flex w-100 h-100">\n                        <div class="w-100 h-100 hook-left"></div>\n                        <div class="w-100 h-100 hook-right"></div>\n                    </div>\n                    <label>${n.label}</label>\n                    <div class="form-control mb-1"></div>\n                </div>`},init:function(){let n=this;n.dom.append(n.getTpl()),n.dom.find(".form-droppable").droppable({over:function(e,t){t.helper.addClass("draggable-over"),n.dom.find(".form-field").removeClass("selected"),n.dom.find(".form-field .tools").hide(),1==n.dom.find(".form-field").length&&n.dom.find(".form-view").prepend(n.getHookTpl())},out:function(e,t){t.helper.removeClass("draggable-over"),n.dom.find(".form-hook").remove()},drop:function(e,t){console.log("drop1"),t.draggable.hasClass("studio-component")?n.createField(t.draggable):t.draggable.hasClass("form-field")&&(n.dom.find(".form-hook").after(t.draggable).remove(),t.draggable.addClass("selected"),t.draggable.find(".tools").show())}}),n.hook(),n.dom.on("click",".form-field",(function(){let e=$(this);e.hasClass("hide")||(n.dom.find(".form-field").removeClass("selected"),n.dom.find(".form-field .tools").hide(),e.addClass("selected"),e.find(".tools").show())}))},hook:function(){let n=this;n.dom.find(".hook-left,.hook-right").droppable({over:function(e,t){let o=$(e.target);n.dom.find(".form-hook").remove(),o.hasClass("hook-left")&&o.parents(".form-field").before(n.getHookTpl()),o.hasClass("hook-right")&&o.parents(".form-field").after(n.getHookTpl())},drop:function(e,t){console.log("drop"),t.draggable.hasClass("studio-component")?n.createField(t.draggable):t.draggable.hasClass("form-field")&&(n.dom.find(".form-hook").after(t.draggable).remove(),t.draggable.addClass("selected"),t.draggable.find(".tools").show())}}),n.dom.find(".form-field").draggable({handle:".fa-arrows-alt",helper:function(n){return $(n.currentTarget).clone(!0).addClass("studio-component-dragging").css("width","24%")},start:function(n,e){$(n.currentTarget).hide()},stop:function(n,e){console.log("stop"),$(n.target).show()}})},createField:function(n){let e=this;e.dom.find(".form-hook").after(e.getField({label:"测试"+jdoo.nextId()})).remove(),e.hook()}})},718:()=>{$.component("MenuView",{label:"菜单",model:"studio.designer",module:"studio",ztreeSetting:{view:{selectedMulti:!1},data:{simpleData:{enable:!0,pIdKey:"parent_id"},key:{name:"present"}},edit:{drag:{isCopy:!0,isMove:!1,prev:!1,next:!1,inner:!1},enable:!0,removeTitle:"删除".t(),renameTitle:"重命名".t(),showRemoveBtn:function(n,e){return"diagram"===e.type||"app"===e.type||"model"===e.type},showRenameBtn:function(n,e){return"diagram"===e.type||"app"===e.type||"model"===e.type}}},getTpl:function(){return`<div class="h-100 menu-view">\n                    <div class="menu-head">\n                        <label>菜单</label>\n                        <span role="button" class="float-right btn-collapse"><i class="fas fa-bars"></i></span>\n                    </div>                        \n                    <div class="m-1">\n                        <div class="input-group input-group-sm">\n                            <div class="input-group-prepend">\n                                <button class="btn btn-default btn-sm btn-collespe" title="${"收起所有".t()}">\n                                    <span class="fas fa-chevron-up"></span>\n                                </button>\n                                <button class="btn btn-default btn-sm btn-add" title="${"新增".t()}">\n                                    <span class="fas fa-plus"></span>\n                                </button>\n                            </div>\n                            <input type="text" class="form-control input-keyword"></input>\n                            <div class="input-group-append">\n                                <div data-btn="view" class="btn btn-default btn-lookup">\n                                    <span class="fa fa-search"></span>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    <div class="menu-panel">\n                        <div id="menulist" class="menu-list ztree"></div>\n                    </div>\n                </div>\n                <div class="h-100 menu-extender" style="display:none" role="button">\n                    <span class="fa fa-angle-right"></span>\n                </div>\n                `},init:function(){let n=this;n.dom.append(n.getTpl()),$.extend(!0,n.ztreeSetting,{view:{addHoverDom:function(e,t){if("models"===t.type||"diagrams"===t.type){let e=n.dom.find("#"+t.tId+"_a"),o=e.find(".btn-refresh");if(o.length>0)return void o.show();e.append('<span data-n="'+t.tId+'" title="'+"重新加载".t()+'" class="ml-1 fas fa-sync btn-refresh" ></span>')}},removeHoverDom:function(e,t){"models"!==t.type&&"diagrams"!==t.type||n.dom.find("#"+t.tId+"_a .btn-refresh").hide()}},callback:{onClick:function(e,t,o){o&&o.model&&n.editView(o)},beforeEditName:function(n,e){return!1},beforeRemove:function(n,e){return!1},beforeExpand:function(n,e){return!0}}}),n.dom.on("click",".btn-collapse",(function(){n.dom.animate({width:8},250,"linear",(function(){n.dom.find(".menu-view").hide(),n.dom.find(".menu-extender").show()}))})).on("click",".menu-extender",(function(){$(this).hide(),n.dom.find(".menu-view").show(),n.dom.animate({width:240},250,"linear")})),n.load()},editView:function(n){this.ws.openTab(n.id,{title:n.present,closable:!0,init:function(e){e.ViewDesigner({dataId:n.id})}})},load:function(){let n=this,e=n.dom.find(".input-keyword").val(),t=[];e&&t.push(["present","like",e]),jdoo.rpc({model:n.model,module:n.module,method:"searchMenu",args:{criteria:t,fields:["present","parent_id","model"]},onsuccess:function(e){let t=e.data;n.appTree=$.fn.zTree.init(n.dom.find(".menu-list"),n.ztreeSetting,t)}})}})},789:()=>{$.component("Studio",{getTpl:function(){return'<aside class="left-box">\n                </aside>\n                <div class="main-box">\n                </div>'},init:function(){let n=this;n.dom.append(n.getTpl());let e=n.dom.find(".main-box").JTabs({onTabActived:function(n,e,t){}});n.dom.find(".left-box").MenuView({ws:e})}}),$((function(){window.apps=$(".studio-designer").Studio({})}))},177:()=>{$.component("ViewDesigner",{getTpl:function(){return`<div data-id="${this.dataId}" class="view-designer">\n                    <div class="tool-bar">\n                        <button title="${"刷新".t()}" class="btn btn-default btn-sm btn-reload">\n                            <span class="fas fa-sync-alt"></span>\n                        </button>\n                        <button title="${"撤销".t()}" class="btn btn-default btn-sm btn-undo">\n                            <span class="fas fa-undo-alt"></span>\n                        </button>\n                        <button title="${"恢复".t()}" class="btn btn-default btn-sm btn-redo">\n                            <span class="fas fa-redo-alt"></span>\n                        </button>\n                        <button title="${"查看代码".t()}" class="btn btn-default btn-sm btn-code-view">\n                            <span class="fas fa-laptop-code"></span>\n                        </button>\n                        <button title="${"下载代码".t()}" class="btn btn-default btn-sm btn-code-down">\n                            <span class="fas fa-download"></span>\n                        </button>\n                        <button title="${"从源码包生成模型图".t()}" class="btn btn-default btn-sm btn-reflact">\n                            <span class="fas fa-gg"></span>\n                        </button>\n                    </div>\n                    <aside class="left-box">\n                    </aside>\n                    <div class="main-box">\n                    </div>\n                </div>`},init:function(){let n=this;n.dom.append(n.getTpl()),n.dom.find(".left-box").Fields({designer:n}),n.view=n.dom.find(".main-box").FormView({})}})}},e={};function t(o){var i=e[o];if(void 0!==i)return i.exports;var d=e[o]={exports:{}};return n[o](d,d.exports,t),d.exports}t.n=n=>{var e=n&&n.__esModule?()=>n.default:()=>n;return t.d(e,{a:e}),e},t.d=(n,e)=>{for(var o in e)t.o(e,o)&&!t.o(n,o)&&Object.defineProperty(n,o,{enumerable:!0,get:e[o]})},t.o=(n,e)=>Object.prototype.hasOwnProperty.call(n,e),(()=>{"use strict";t(471),t(795),t(718),t(177),t(789)})()})();